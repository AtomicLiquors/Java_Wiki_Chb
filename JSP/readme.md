# JSP
- Web server vs Web Application Server 차이 정리하세요.


JSP(Java Server Pages)
서블릿과 반대로 "HTML 내에 자바 코드를 삽입". 
웹서버에서 동적으로 웹 페이지를 생성하여, 웹 브라우저에 돌려주는 "서버 사이드 스크립트 언어"이다.   
JSP는 WAS(Web Application Server)에 의해 서블릿 클래스로 변환하여 사용되므로 서블릿과 거의 유사하다고 볼 수 있다.

&nbsp;  

JSP는 왜 생겼을까?  
기존의 서블릿은 자바 코드 내에 HTML 코드가 있어서 읽고 쓰기가 굉장히 불편하기 때문에 작업의 효율성이 떨어졌다.   
그렇기 때문에 HTML 코드 안에서 자바 코드를 작성할 수 있는 JSP가 생겨난 것이다.

HTML 속에서 자바 코드는 <% %> 나 <%= %> 형태로 들어간다.   
이를 각각 Scriptlet, Expression이라고 한다.   
자바 소스코드로 작성된 이 부분은 웹 브라우저로 보내는 것이 아니라, 웹서버에서 실행된다.   
또한 **컴파일 과정이 필요없이** JSP 페이지를 작성하여 웹서버의 디렉토리에 추가만 하면 사용할 수 있다.  

 

[JSP 동작 구조]
 

웹서버가 사용자로부터 서블릿에 대한 요청을 받으면 서블릿 컨테이너에 그 요청을 넘긴다.   
요청을 받은 컨테이너는 HTTP Request와 HTTP Response 객체를 만들어, 이들을 통해 서블릿 doPost()나 doGet() 메소드 중 하나를 호출한다.   
만약 서블릿만 사용하여 사용자가 요청한 웹 페이지를 보여주려면 out 객체(PrintWriter out = response.getWriter();)의 println() 메소드를 사용하여 HTML 문서를 작성해야 한다.  
이는 추가/수정이 어렵고, 가독성도 떨어지므로 JSP를 사용하여 비즈니스 로직(Controller)과 프레젠테이션 로직(View)을 분리하는 것이 좋다.   
여기서 서블릿은 데이터의 입력, 수정 등에 대한 제어를 JSP에게 넘겨서 프레젠테이션 로직을 수행한 후 컨테이너에게 Response를 전달한다.   
이렇게 만들어진 결과물은 사용자가 해당 페이지를 요청하면 컴파일이 되어 자바 파일을 통해 .class 파일이 만들어지고, 두 로직이 결합되어 클래스화된다.
