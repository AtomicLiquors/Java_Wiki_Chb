# 문자열 

- String 클래스는 "char[]"와 "메서드 기능"을 결합한 것.  
	String 클래스의 주요 메서드
	- charAt(int index) : 문자열의 특정 인덱스에 있는 문자를 char로 반환한다.
	- length() : 길이를 int로 반환한다. - 왜 배열은 length고, 예는 length()지?
	- substring(idx1, idx2) : 문자열을 idx1부터 (idx2-1)까지 잘라서, 결과를 String으로 반환한다.
	- equals() : 두 문자열의 값이 같은지를 boolean으로 반환한다.
	- toCharArray() : 문자열을 char의 배열(char[])로 반환한다.


&nbsp;  
## String은 '참조형 변수'
앞서 문자열은 기본형*primitive type*에 속하지 않는다는 것을 배웠다.  
char가 기본형 문자형에 해당하는 것이지, String은 해당하지 않는다.  
String은 기본형을 뺀 나머지인 **참조형***reference type*인 것이다.

Java에서도 String은 기본 타입이 아닌 클래스로 존재한다.  
String은 그런데, 유일하게 객체를 생성하는 연산자 new 없이 객체 생성이 가능한 클래스다.  
그 이유는? 워낙 많이 쓰이기 때문이다.

```java
String s1 = new String("Java");
String s2 = new String("Java");
    		
String s3 = "Java";
String s4 = "Java";
```

&nbsp;  
String은 참조형 변수이므로, 기본값이 null이다.   
null의 의미는 '어떠한 객체도 가리키고 있지 않다'는 뜻이다.  

&nbsp; 
&nbsp; 
### Q. 그럼 String을 출력하면 왜 주소가 아니라 문자열이 출력되나요?

Because String object overrides the default toString() method.  
https://stackoverflow.com/questions/39222770/why-does-string-reference-variable-stores-string-and-not-an-address-in-java. 


&nbsp;  

### String 클래스는 내용을 변경할 수 없다 *readonly* .
```
String a = "a";
String b = "b";
a = a + b
```
이렇게 하면 a의 내용이 바뀌는 걸까?  
사실은 기존 문자열을 바꾸는 게 아니라,   
새로운 문자열을 만들고 변수를 새로운 문자열에 연결시키는 것이다.  
9장에 가서 자세히 설명할 예정.
&nbsp;  
### 두 String 변수의 값 비교하기
Q. '=='으로 String 변수 두 개를 비교하려는데...   
분명 같은 값인데 자꾸 false가 떠요. 어떻게 하죠?  

A. '==' 대신 '.equals()'를 쓸 것.  
&nbsp;

다음 두 가지 사실을 짚고 넘어가자.
- String은 '기본형'이 아닌 '참조형'이라는 것.
- 연산자 '=='는 기본형 변수에 대해선 값을 비교하고,  
참조형 변수에 대해선 "값"은 물론 "객체 주솟값"까지 비교한다는 것.

내용이 같더라도, 서로 별개의 객체라면 false를 반환한다.


```java
int a = 10, b= 10;
if(a==b)
	System.out.println("a는 b와 같다");

//출력 결과 : a는 b와 같다
```

기본형 변수끼리 비교한 경우.  
'==' 연산자는 두 변수의 "값"을 비교한다.  
&nbsp;  

```java
String s1 = new String("Java");
String s2 = new String("Java");
    		
String s3 = "Java";
String s4 = "Java";

if(s1==s2) System.out.println("s1==s2 : true");
if(s1==s3) System.out.println("s1==s3 : true");
if(s3==s4) System.out.println("s3==s4 : true");
```
참조형 변수끼리 비교한 경우.  
'==' 연산자는 두 변수의 "객체 주솟값"까지 비교한다.  

이 때 

new연산자를 달고 String 객체를 선언한 경우 :   
독립적으로 만들어진 String 객체는 독립적인 공간에 저장된다.

new연산자 없이 선언된 String 객체는 "String 저장소"라는 공간에 저장된다.  
저장소에서 없으면 생성을 함, 그러나 동일한 문자열이 같이 사용" -> 의미가?   
따라서 출력을 할 경우,   
s3와 s4의 주솟값만 같다는 결과가 나온다.
  
* 실제로 실행해 보니 값도 같고, 주솟값고 같아야 true가 반환된다.
* 블로그 올리기 전에 == 연산자 의미를 좀더 정확히 파악해보자.
  
```jsx

System.out.println(System.identityHashCode(s1));
System.out.println(System.identityHashCode(s2));
System.out.println(System.identityHashCode(s3));
System.out.println(System.identityHashCode(s4));

/*
출력 결과(예시) : 
305623748
758529971
2104457164
2104457164
*/
```

각 변수가 어디 저장되는지 직접 출력해서 확인할 수 있다.  
이 값은 절대적이진 않고, pc마다 상이할 수 있다.  
&nbsp;
### equals 메소드
원래 우리의 목적대로 
"String의 값"을 비교하는 equals 메소드를 사용하자.
```java
if(s1.equals(s2))
	System.out.println("true");
if(s1.equals(s3))
	System.out.println("true");
if(s3.equals(s4))
	System.out.println("true");	

/*출력 결과 : 
true
true
true
*/
```
 

&nbsp; 
  Tip : 대소문자를 구분하지 않고 비교하고 싶다면 다음과 같이.
```jsx
String s5 = "APPLE";
String s6 = "apple";
if(s5.equalsIgnoreCase(s6))
	System.out.println("대소문자 구분 없이 비교 : true");
```

```jsx
package ch06;

public class StringEx2 {

	public static void main(String[] args) {
		String s1 = "Java Programming";
		int len = s1.length();
		System.out.println("문자열 길이 : " + len);
		System.out.println("대문자 : " + s1.toUpperCase());
		System.out.println("소문자 : " + s1.toLowerCase());
		
		String s2 = s1.substring(5);
		String s3 = s1.substring(5, 10);
		System.out.println(s2);
		System.out.println(s3);
		
		char c1 = s1.charAt(8);
		System.out.println(c1);
		for (int i = 0; i < len; i++) {
			if(i%2==0)
				System.out.print(s1.charAt(i));
		}
		System.out.println("\n--------------------");
		
		//첫 a의 자리값
		int idx1 = s1.indexOf('a');
		System.out.println("idx1 : " + idx1);
		
		//마지막 a의 자릿값
		int idx2 = s1.indexOf('a');
		System.out.println("idx2 : " + idx2);
		
		String s4 = s1.replace('a', 'q');
		System.out.println(s4);
		
		for (int i = 0; i < len; i++) {
			if(s1.charAt(i)=='a')
				System.out.print('k');
			else
				System.out.println(s1.charAt(i));
		}
		System.out.println("\n--------------------");
		
		//문자열을 특정 문자를 기준점 삼아 쪼개서 배열로 만듦.
		String s5 = "Java&JSP&Android&Spring";
		String s6[] = s5.split("&");
		for (int i = 0; i < s6.length; i++) {
			System.out.println(s6[i]);
		}
		
		String s7 = "   JSPStudy   ";
		//앞쪽 뒤쪽 공백 제거 기능
		System.out.println("***"+s7.trim() +"***");
		
		
	}

}
```
    
    - 문제풀이
        
        ```jsx
        package ch06;
        
        public class StringEx3 {
        
        	public static void main(String[] args) {
        		String s1 = "전지현이가 백화점에서 팬사인회를 연다."
        		        + "전지현은 5일 오후 3시 서울 소공동 롯데 백화점"
        		        + " 8층 이벤트홀에서... 구두 브랜드 조이제화의" 
        		        + " 홍보를 위한 팬사인회에 참석한다.";
        		
        		int len = s1.length();
        		System.out.println(len);
        		//문제1. s1의 앞에서부터 빈칸 자릿값을 출력하세요.(indexOf)
        		//5, 11, 17...
        		//문제2. s1의 뒤에서부터 빈칸 자릿값을 출력하세요.(lastIndexOf)
        				//87, 81, 78
        				
        		
        		//indexOf를 안 쓴 예제
        		
        		for (int i = 0; i < len; i++) {
        			if(s1.charAt(i) ==' ')
        				System.out.print(i+", ");
        		}
        		System.out.println("");
        		
        		for (int i = len-1; i>=0; i--) {
        			if(s1.charAt(i) ==' ')
        				System.out.print(i+", ");
        		}
        		System.out.println("");
        		
        		
        		//indexOf를 쓴 예제
        		
        		int idx = -1;
        		do {
        			idx = s1.indexOf(' ', idx+1);
        			if(idx>=0) 
        				System.out.print(idx + ", ");
        				//조건에 맞는 위치값이 더 이상 없을때 idx가 -1이 리턴된다.(왜지?)
        				//아무튼 그래서 반복문은 종결.
        		} while (idx>=0);
        		System.out.println("");
        		
        		
        		int ldx = len;
        		do {
        			ldx = s1.lastIndexOf(' ', ldx-1);
        			if(ldx>=0) 
        				System.out.print(ldx + ", ");
        		} while (ldx>=0);
        		System.out.println("");
        		
        		
        		
        		
        		//문제3. 빈칸을 '_'로 출력
        		String s2 = s1.replace(' ', '_');
        		System.out.println(s2);
        		
        		//문제4. 첫 단어를 출력
        		//문제5. 마지막 단어를 출력
        		
        		//나의 답변
        		String s1Arr[] = s1.split(" ");		
        		System.out.println("첫 번째 단어 : " + s1Arr[0]);
        		System.out.println("마지막 단어 : " + s1Arr[s1Arr.length - 1]);
        		
        		//모범답안
        		String s3 = s1.substring(0, s1.indexOf(' '));
        		System.out.println(s3);
        		
        		String s4 = s1.substring(s1.lastIndexOf(' ')+1, len);
        		System.out.println(s4);
        		
        	}
        
        }
        ```

String의 치명적 단점 : 한번 문자열 값이 지정되면, (엄밀한 의미로) 값을 수정할 수 없다.  
-> StringBuffer로

hashcode(), System.identityHashCode 관련 :  
서로 다른 String 객체인데 왜 hashcode()를 쓰면 똑같이 나오는지.
//https://codechacha.com/ko/java-system-identityhashcode/


```jsx
package ch06;

public class StringEx2 {

	public static void main(String[] args) {
		String s1 = "Java Programming";
		int len = s1.length();
		System.out.println("문자열 길이 : " + len);
		System.out.println("대문자 : " + s1.toUpperCase());
		System.out.println("소문자 : " + s1.toLowerCase());
		
		String s2 = s1.substring(5);
		String s3 = s1.substring(5, 10);
		System.out.println(s2);
		System.out.println(s3);
		
		char c1 = s1.charAt(8);
		System.out.println(c1);
		for (int i = 0; i < len; i++) {
			if(i%2==0)
				System.out.print(s1.charAt(i));
		}
		System.out.println("\n--------------------");
		
		//첫 a의 자리값
		int idx1 = s1.indexOf('a');
		System.out.println("idx1 : " + idx1);
		
		//마지막 a의 자릿값
		int idx2 = s1.indexOf('a');
		System.out.println("idx2 : " + idx2);
		
		String s4 = s1.replace('a', 'q');
		System.out.println(s4);
		
		for (int i = 0; i < len; i++) {
			if(s1.charAt(i)=='a')
				System.out.print('k');
			else
				System.out.println(s1.charAt(i));
		}
		System.out.println("\n--------------------");
		
		//문자열을 특정 문자를 기준점 삼아 쪼개서 배열로 만듦.
		String s5 = "Java&JSP&Android&Spring";
		String s6[] = s5.split("&");
		for (int i = 0; i < s6.length; i++) {
			System.out.println(s6[i]);
		}
		
		String s7 = "   JSPStudy   ";
		//앞쪽 뒤쪽 공백 제거 기능
		System.out.println("***"+s7.trim() +"***");
		
		
	}

}
```

  
String format 문법 형식  

티스토리 말고 다른데서 파쿠리하자.

%[argument_index$][flags][width]conversion
문법 설명
1) 필수값: %와 conversion 으로 무조건 있어야합니다.
"conversion": 표현 할 데이터의 타입으로, s(문자열), d(정수), x(16진수), o(8진수), f(실수) ex) %s, %d, %x, %o, %f
ex) System.out.println(String.format("%s, %s", "KOREA", "JAPAN"));
2) 옵션값: [argument_index$][flags][width] 는 생략 가능합니다.
생략 가능한 옵션
[argument_index] 옵션
[flags] 옵션
[width] 옵션
[argument_index] 옵션
들어갈 파라미터의 인덱스이다. 1부터 시작한다.
아래를 보면 2$와 1$를 각 각 추가했는데 2$는 두번 째 문자열인 "JAPAN"을 의미하고,
1$는 첫 번째 "KOREA"를 의미하기 때문에 출력 순서가 바뀐 것입니다.

// 길이를 10으로 지정 (width +  argument_index 옵션)
System.out.println(String.format("%2$10s%1$10s", "KOREA", "JAPAN"));
     JAPAN     KOREA

[flags] 옵션
[flags]는 [argument_index]와 [width]사이에 위치합니다.
'-' flag를 사용하면 출력되는 문자열이 왼쪽으로 정렬 됩니다.
'-' flag를 빼면 이전 예제와 같이 오른쪽으로 정렬됩니다.

System.out.println(String.format("%-10s%-10s", "KOREA", "JAPAN"));
KOREA     JAPAN     

System.out.println(String.format("%10s%10s", "KOREA", "JAPAN"));
     KOREA     JAPAN

[width] 옵션
conversion앞에 위치하는 [width]를 사용한 샘플입니다.

// 길이를 10으로 지정 (width 옵션)
System.out.println(String.format("%10s%10s", "KOREA", "JAPAN"));
     KOREA     JAPAN

 

필수 값 : conversion
%d : 10진수(정수)
%x : 16진수
%o : 8진수
%f : 실수
1. %d : 10진수(정수)
// 정수는 %뒤에 d를 붙여서 사용합니다.
System.out.println(String.format("%d, %d", 12345, 67890));
12345, 67890
System.out.println(String.format("%10d%10d", 12345, 67890));
     12345     67890
System.out.println(String.format("%2$10d%1$10d", 12345, 67890));
     67890     12345
System.out.println(String.format("%-10d%-10d", 12345, 67890));
12345     67890     

// 이번엔 0 flag를 사용해서 공백 부분은 0으로 채우겠습니다.
// 0 flag는 정수나 실수를 대입할때만 사용가능하며 문자열 등에는 사용할 수 없습니다.
System.out.println(String.format("%010d%010d", 12345, 67890));
00000123450000067890

//정수, 실수에 사용 가능한 몇가지 flag를 더 사용해 보겠습니다. + flag를 사용한 샘플입니다.
//부호를 표시하면서 남는 자리수는 0으로 채우는 샘플입니다.
System.out.println(String.format("%+10d%+10d", 100, -200));
      +100      -200

// '(' 를 사용하면 음수인 경우만 괄호가 사용됩니다.
System.out.println(String.format("%(10d%(10d", 100, -200));
       100     (200)

// ',' flag를 사용한 샘플입니다.
// ','를 사용하면 해당 국가에서 사용되는 기호로 숫자를 그룹지어 줍니다. 대부분 콤마가 사용될 것 같네요.
System.out.println(String.format("%,10d%,10d", 10000, -20000));
10,000 -20,000
2. %x : 16진수
// x를 사용하면 16진수를 출력합니다.
// 아래 샘플에서는 10진수 2047이 16진수로 변환되서 출력 됩니다.
System.out.println(String.format("%10x%10x", 2047, 2047));
       7ff       7ff

// X를 대문자로 사용하면 16진수도 대문자로 출력됩니다.
System.out.println(String.format("%10X%10X", 2047, 2047));
       7FF       7FF
3. %o : 8진수
// o를 사용하면 8진수를 출력합니다. 아래 샘플에서는 10진수 2047이 8진수로 변환되서 출력 됩니다.
System.out.println(String.format("%10o%10o", 2047, 2047));
      3777      3777
4. %f : 실수
// 실수는 f를 사용합니다.
// 사용법은 정수와 거의 같고 .을 사용하면 정밀도를 지정 할 수 있습니다.
// 아래 샘플에서는 정밀도를 소숫점 두 자리까지 지정 했는데 .99가 아니라 .00으로 출력되는 이유는 반올림 되었기 때문입니다.
System.out.println(String.format("%10.2f%10.2f", 100000.999f, 200000.999f));
100001.00 200001.00
